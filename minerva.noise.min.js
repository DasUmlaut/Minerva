Minerva.noise=new function(){var r={seed:0,perm:[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],permMod8:[],igrad:[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]]},a={setSeed:function(a){r.seed=a},random:function(){r.seed=(9301*r.seed+49297)%233280;var a=r.seed/233280;return a},permutate:function(e){var t=[],n=[];for(i=0;i<2*e;i++){var o=255&Math.round(255*a.random());t[i]=o,n[i]=o%8}r.perm=t.concat(t),r.permMod8=n.concat(n)},grad2:function(r,a,e){var t=7&r,n=4>t?a:e,o=4>t?e:a;return(1&t?-n:n)+(2&t?-2*o:2*o)},fade:function(r){return r*r*r*(r*(6*r-15)+10)},lerp:function(r,a,e){return a+r*(e-a)}},e={random:function(){var r=2*a.random()-1;return r},classicperlin:function(e,t,n,o){var s,i,f,u,c,d,g,v,l,m,p,h,M,b,y,T,w,L,S,A,C=r.perm;return s=Math.floor(e)%n,i=(s+1)%o,l=e-Math.floor(e),m=l-1,f=Math.floor(t)%n,u=(f+1)%o,p=t-Math.floor(t),h=p-1,S=C[s],A=C[i],c=C[S+f],g=C[A+f],d=C[S+u],v=C[A+u],M=a.fade(l),b=a.fade(p),w=a.grad2(c,l,p),L=a.grad2(g,m,p),y=a.lerp(M,w,L),w=a.grad2(d,l,h),L=a.grad2(v,m,h),T=a.lerp(M,w,L),.5*(1+a.lerp(b,y,T))},improvedperlin:function(e,t,n,o){var s,i,f,u,c,d,g,v,l,m,p,h,M,b,y,T,w,L,S,A,C=r.perm,q=r.permMod8,x=r.igrad;return s=Math.floor(e)%n,i=(s+1)%o,l=e-Math.floor(e),m=l-1,f=Math.floor(t)%n,u=(f+1)%o,p=t-Math.floor(t),h=p-1,S=C[s],A=C[i],c=q[S+f],g=q[A+f],d=q[S+u],v=q[A+u],M=a.fade(l),b=a.fade(p),w=l*x[c][0]+p*x[c][1],L=m*x[g][0]+p*x[g][1],y=a.lerp(M,w,L),w=l*x[d][0]+h*x[d][1],L=m*x[v][0]+h*x[v][1],T=a.lerp(M,w,L),.5*(1+a.lerp(b,y,T))}},t={additive:function(r,a){return r+a},subtractive:function(r,a){return r-a},turbulence:function(r,a){Math.abs(a);return r+Math.abs(a)}},n={none:function(r,a,t,n,s,i){var f=e[r](a,t,n,s,i);return o[i.sumationType](f,i)},fBM:function(r,a,n,s,i,f){for(var u=1,c=0,d=0;d<f.octaves;d++){var g=e[r](a,n,s,i,f);c=t[f.octaveType](c,g*u),a*=f.fbmLacunarity,n*=f.fbmLacunarity,s*=f.fbmLacunarity,i*=f.fbmLacunarity,u*=f.fbmPersistence}return o[f.sumationType](c,f)}},o={normal:function(r){return r/2+.5},absolute:function(r){return Math.abs(r)},modular:function(r){return(r+1)%1},threshold:function(r){return r>0?1:0}},s={color:"grayscale",noiseType:"improvedperlin",fractalType:"fBM",octaveType:"additive",sumationType:"normal",scale:1,seed:1,octaves:5,fbmLacunarity:2,fbmPersistence:.5};this.generateChannel=function(r,e,t){args={};for(var o in s)args[o]=s[o];for(var o in t)args[o]=t[o];args.width=r,args.height=e,a.setSeed(0==args.seed?Math.random():args.seed);var i=1/64,f=r,u=e,c=new Minerva.Channel;c.setSize(r,e);var d=[];a.permutate(Math.sqrt(f*u));for(var g=-1e3,v=1e3,l=0;r>l;l++){d[l]=[];for(var m=0;e>m;m++){var p=n[args.fractalType](args.noiseType,i*l,i*m,i*f,i*u,args);d[l][m]=p,v=Math.min(v,p),g=Math.max(g,p)}}for(var h=g-v,l=0;r>l;l++)for(var m=0;e>m;m++)c.setAt(m*e+l,(d[0][l][m]-v)/h);return c},this.generate=function(r,e,t){var o=-1e3,i=1e3,f=new Minerva.Img;f.setSize(r,e),args={};for(var u in s)args[u]=s[u];for(var u in t)args[u]=t[u];args.width=r,args.height=e,a.setSeed(0==args.seed?Math.random():args.seed);var c=1/64,d=r,g=e,v=1;"rgb"==args.color?v=3:"rgba"==args.color&&(v=4);for(var l=[],m=0;v>m;m++){a.permutate(Math.sqrt(d*g)),l[m]=[];for(var p=0;r>p;p++){l[m][p]=[];for(var h=0;e>h;h++){var M=n[args.fractalType](args.noiseType,c*p,c*h,c*d,c*g,args);l[m][p][h]=M,i=Math.min(i,M),o=Math.max(o,M)}}}for(var b=o-i,p=0;r>p;p++)for(var h=0;e>h;h++){var y=0,T=0,w=0,L=1;"grayscale"==args.color?(y=(l[0][p][h]-i)/b,T=(l[0][p][h]-i)/b,w=(l[0][p][h]-i)/b):"rgb"==args.color?(y=(l[0][p][h]-i)/b,T=(l[1][p][h]-i)/b,w=(l[2][p][h]-i)/b):"rgba"==args.color&&(y=(l[0][p][h]-i)/b,T=(l[1][p][h]-i)/b,w=(l[2][p][h]-i)/b,L=(l[3][p][h]-i)/b),f.setColorAt(h*e+p,{r:y,g:T,b:w}),f.setAlphaAt(h*e+p,L)}return f}};
